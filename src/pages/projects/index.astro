---
import { cx } from "class-variance-authority";
import { getCollection } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";
import HorizontalCard from "../../components/HorizontalCard.astro";

const projects = await getCollection("projects");
const foss = await getCollection("foss");
---
<BaseLayout title="Projects" sideBarActiveItemID="projects">
  {projects.map((p, idx) => (
    <>
      <div class={cx('divider my-0', { 'hidden': idx === 0})}></div>
      <HorizontalCard
        title={`${p.data.title}, ${p.data.customer}`}
        img="/post_img.webp"
        desc={`From ${p.data.from} to ${p.data.to}, ${p.data.role}`}
        url={`/projects/${p.slug}`}
        target="_self"
      />
    </>
  ))}

  {foss.map((p, idx) => (
    <div class={cx({ 'mt-16': idx === 0})}>
      <div class={cx('divider my-0', { 'hidden': idx === 0})}></div>
      <HorizontalCard
        title={p.data.title}
        img="/post_img.webp"
        desc={p.data.description}
        url={p.data.url}
        badge="GitHub"
        tags={p.data.tags}
      />
    </div>
  ))}

</BaseLayout>
