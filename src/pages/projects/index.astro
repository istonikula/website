---
import { cx } from "class-variance-authority";
import { getCollection } from "astro:content";
import BaseLayout from "@layouts/BaseLayout.astro";
import { topProjects } from '@lib/topProjects'
import ProjectCardFoss from '@components/ProjectCardFoss.astro'
import ProjectCardWork from '@components/ProjectCardWork.astro'

const projects = await topProjects();
const foss = await getCollection("foss");
---
<BaseLayout title="Projects" sideBarActiveItemID="projects">
  {projects.map((p, idx) => (
    <>
      <div class={cx('divider my-0', { 'hidden': idx === 0})}></div>
      <ProjectCardWork slug={p.slug} project={p.data} />
    </>
  ))}

  {foss.map((p, idx) => (
    <div class={cx({ 'mt-16': idx === 0})}>
      <div class={cx('divider my-0', { 'hidden': idx === 0})}></div>
      <ProjectCardFoss project={p.data} />
    </div>
  ))}

</BaseLayout>
