---
import Layout from '@/components/Layout/Layout.astro'
import SectionHeading from '@/components/SectionHeading.astro'
import { certs, employments, fromTo, pinnedProjects } from '@/data'
import { allTags } from '@/lib/tags'

import Project from './_components/Project.astro'
import Subtitle from './_components/Subtitle.astro'
import TimeLine from './_components/TimeLine.astro'
import Title from './_components/Title.astro'

const projects = pinnedProjects
const obsoleteTags = ['Azure', 'folktale', 'ramda', 'monocle-ts', 'Vue']
const skills = allTags()
  .filter((x) => !obsoleteTags.includes(x))
  .sort((a, b) => a.localeCompare(b, undefined, { sensitivity: 'base' }))
---

<Layout title="Resume" sideBarActiveItemID="cv">
  <div class="mb-5">
    <SectionHeading>Project Experience</SectionHeading>
  </div>

  <div class="mb-8">
    {
      projects.map((p, idx) => (
        <TimeLine last={idx === projects.length - 1}>
          <Project slug={p.slug} />
        </TimeLine>
      ))
    }
  </div>

  <div class="mb-5">
    <SectionHeading>Employment</SectionHeading>
  </div>

  <div class="mb-8">
    {
      employments.map((e, idx) => (
        <TimeLine last={idx === employments.length - 1}>
          <div class="mb-2">
            <Title>{e.title}</Title>
            <Subtitle>{`${fromTo(e)} ${e.employer}`}</Subtitle>
          </div>
        </TimeLine>
      ))
    }
  </div>

  <div class="mb-5">
    <SectionHeading>Certifications</SectionHeading>
  </div>

  <div class="mb-8">
    {
      certs.map((c, idx) => (
        <TimeLine last={idx === certs.length - 1}>
          <div class="mb-2">
            <Title>{c.title}</Title>
            <Subtitle>{c.subtitle}</Subtitle>
          </div>
        </TimeLine>
      ))
    }
  </div>

  <div class="mb-5">
    <SectionHeading>Education</SectionHeading>
  </div>

  <div class="mb-8 grid gap-4">
    <TimeLine>
      <div class="mb-2">
        <Title>Master of Science, Computer Science</Title>
        <Subtitle>1996 to 2001 at University of Helsinki</Subtitle>
        <ul class="mt-2">
          <li>Major: Software Engineering</li>
          <li>1. Minor: Mathematics</li>
          <li>2. Minor: Work Psychology and Leadership</li>
        </ul>
      </div>
    </TimeLine>
    <TimeLine last={true}>
      <div class="mb-2">
        <Title>Spanish Language and Culture</Title>
        <Subtitle>2003 to 2003 at Universidad de Zaragoza, Spain</Subtitle>
      </div>
    </TimeLine>
  </div>

  <div class="mb-5">
    <SectionHeading>Skills</SectionHeading>
  </div>

  <ul class="mx-6 list-disc columns-2 md:columns-5">
    {skills.map((skill) => <li>{skill}</li>)}
  </ul>
</Layout>
